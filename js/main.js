(()=>{var U=Object.defineProperty;var z=(e,t,o)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var g=(e,t,o)=>z(e,typeof t!="symbol"?t+"":t,o);var v=[],a={q:e=>document.querySelector(e),qa:e=>document.querySelectorAll(e),gId:e=>document.getElementById(e),debounce(e,t,o){let n;return function(){let i=arguments;clearTimeout(n),n=setTimeout(()=>{n=null,o||e.apply(this,i)},t),o&&!n&&e.apply(this,i)}},wrap(e,t,o={}){if(typeof t=="string"){t=document.createElement(t);for(let[n,i]of Object.entries(o))t.setAttribute(n,i)}e.parentNode.insertBefore(t,e),t.appendChild(e)},urlFor(e){return/^(#|\/\/|http(s)?:)/.test(e)?e:(window.ASYNC_CONFIG.root+e).replace(/\/{2,}/g,"/")},siblings:(e,t)=>[...e.parentNode.children].filter(o=>t?o!==e&&o.matches(t):o!==e),message(e,t="success"){let o=document.createElement("div");o.className=`trm-message ${t}`,o.style.top=`${30+v.length*60}px`,o.innerText=e,document.body.append(o),v.push(o),setTimeout(()=>{v=v.filter(n=>n!==o),document.body.removeChild(o),v.forEach((n,i)=>{n.style.top=`${30+i*60}px`})},2e3)},loadScript(e,t){return new Promise((o,n)=>{if(t)o();else{let i=document.createElement("script");i.src=e,i.setAttribute("async","false"),i.onerror=n,i.onload=()=>o(),document.head.appendChild(i)}})},runScriptBlock(e){let t=e.text||e.textContent||e.innerHTML||"",o=document.head||document.querySelector("head")||document.documentElement,n=document.createElement("script");if(t.match("document.write"))return console&&console.log&&console.log("Script contains document.write. Can\u2019t be executed correctly. Code skipped "),!1;try{n.appendChild(document.createTextNode(t))}catch(i){n.text=t}o.appendChild(n),o.contains(n)&&o.removeChild(n)},icons(e,t="font"){return t==="symbol"?`<svg class="symbol-icon " aria-hidden="true"><use xlink:href="#${e}"></use></svg>`:`<i class="iconfont ${e}"></i>`},diffDate:(e,t=!1)=>{let o=new Date,n=new Date(e),i=o.getTime()-n.getTime(),s=1e3*60,r=s*60,c=r*24,d=c*30,l;if(t){let m=i/d,w=i/c,u=i/r,f=i/s;m>12?l=n.toISOString().slice(0,10):m>=1?l=parseInt(m.toString())+" "+window.ASYNC_CONFIG.date_suffix.month:w>=1?l=parseInt(w.toString())+" "+window.ASYNC_CONFIG.date_suffix.day:u>=1?l=parseInt(u.toString())+" "+window.ASYNC_CONFIG.date_suffix.hour:f>=1?l=parseInt(f.toString())+" "+window.ASYNC_CONFIG.date_suffix.min:l=window.ASYNC_CONFIG.date_suffix.just}else l=parseInt((i/c).toString());return l},getRandomItem(e){if(Array.isArray(e)){if(e.length===0)return;let t=Math.floor(Math.random()*e.length);return e[t]}return e},scrollBarWidth(){let e=document.createElement("div");e.className="async-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);let t=e.offsetWidth;e.style.overflow="scroll";let o=document.createElement("div");o.style.width="100%",e.appendChild(o);let n=o.offsetWidth;return e.parentNode.removeChild(e),t-n},clickoutside(e,t){return t.includes(e)?!1:e.parentElement?a.clickoutside(e.parentElement,t):!0},isInViewPortOfOne(e){let t=a.viewPortHeight(),n=a.scrollTop()+t,{bottom:i,top:s,height:r}=e.getBoundingClientRect();return i>0&&s<n?{is:!0,ratio:s<0?Math.abs(s/r):0}:{is:!1}},scrollTop(){let e=window.pageXOffset!==void 0,t=(document.compatMode||"")==="CSS1Compat";return e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop},viewPortHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}};var V=(e=600)=>new Promise(t=>{a.q("html").classList.add("is-animating"),a.q(".trm-scroll-container").style.opacity="0",setTimeout(()=>{a.q("html").classList.remove("is-animating"),a.q(".trm-scroll-container").style.opacity="1",t()},e)}),E=(e=600)=>{let t=a.q("#trm-scroll-container"),o=a.q(".trm-mode-swich-animation-frame");return new Promise(n=>{o.classList.add("trm-active"),t.style.opacity="0",setTimeout(()=>{setTimeout(()=>{o.classList.remove("trm-active"),t.style.opacity="1"},e),n()},e)})},K=()=>{document.body.classList.toggle("trm-single-column")},X=()=>{let e=document.body,t=document.createElement("button");t.type="button",t.title=window.ASYNC_CONFIG.i18n.exit_read_mode,t.className="trm-exit-readmode trm-glow",t.innerHTML=a.icons(window.ASYNC_CONFIG.icons.close,window.ASYNC_CONFIG.icontype);let o=()=>new Promise(s=>{let r=document.getElementById("article-container");if(r){let c=Array.from(r.children);for(let d=0;d<c.length;d++){let l=c[d],m=a.isInViewPortOfOne(l);if(m.is){s({el:l,ratio:m.ratio});return}}s()}else s()}),n=s=>{if(s&&s.ratio>0){let{top:r,height:c}=s.el.getBoundingClientRect(),d=s.ratio*c+r+a.scrollTop();window.scrollTo({top:d})}},i=()=>{o().then(s=>{e.classList.remove("trm-read-mode"),t.removeEventListener("click",i),t.remove(),n(s)})};o().then(s=>{e.classList.add("trm-read-mode"),e.appendChild(t),t.addEventListener("click",i),n(s)})},Q=e=>{E().then(()=>{let t=e==="style-dark"?"add":"remove";a.q(".trm-mode-swich-animation").classList[t]("trm-active"),document.documentElement.classList[t]("dark"),localStorage.setItem("theme-mode",e),N(),typeof window.changeGiscusTheme=="function"&&window.changeGiscusTheme()})},N=(e="--theme-bg-color")=>{let t=getComputedStyle(document.documentElement).getPropertyValue(e),o=a.q('meta[name="theme-color"]');t&&o&&(o.content=t)},Z=(e,t,o)=>{let n=a.q("#post-toc");n&&!n.classList.contains("fixed")&&(e===void 0&&(e=!n.classList.contains("active")),e&&(t&&o?(o+n.clientHeight>window.innerHeight&&(o=Math.max(window.innerHeight-n.clientHeight,0)),t+n.clientWidth>window.innerWidth&&(t=Math.max(window.innerWidth-n.clientWidth,0)),n.style.left=`${t}px`,n.style.top=`${o}px`,n.style.right="unset",n.style.bottom="unset"):(n.style.removeProperty("left"),n.style.removeProperty("top"),n.style.removeProperty("right"),n.style.removeProperty("bottom"))),e?n.classList.add("active"):n.classList.remove("active"))},x={pageLoading:V,themeLoading:E,switchSingleColumn:K,switchReadMode:X,switchThemeMode:Q,setThemeColor:N,switchToc:Z};var S=class{constructor(t){g(this,"name","HeadPlugin");g(this,"isSwupPlugin",!0);g(this,"defaultOptions",{persistTags:!1,persistAssets:!1,specialTags:!1});g(this,"options");g(this,"swup");g(this,"getHeadAndReplace",()=>{let t=this.getHeadChildren(),o=this.getNextHeadChildren();this.replaceTags(t,o)});g(this,"getHeadChildren",()=>document.head.children);g(this,"getNextHeadChildren",()=>{let t=this.swup.cache.getCurrentPage().originalContent.replace("<head",'<div id="swupHead"').replace("</head>","</div>"),o=document.createElement("div");o.innerHTML=t;let n=o.querySelector("#swupHead").children;return o.innerHTML="",o=null,n});g(this,"replaceTags",(t,o)=>{let n=document.head,i=!!document.querySelector("[data-swup-theme]"),s=this.getTagsToAdd(t,o,i),r=this.getTagsToRemove(t,o);r.reverse().forEach(c=>{n.removeChild(c.tag)}),s.forEach(c=>{n.insertBefore(c.tag,n.children[c.index+1]||null)}),this.swup.log(`Removed ${r.length} / added ${s.length} tags in head`)});g(this,"compareTags",(t,o)=>{let n=t.outerHTML,i=o.outerHTML;return n===i});g(this,"getTagsToRemove",(t,o)=>{let n=[];for(let i=0;i<t.length;i++){let s=null;for(let r=0;r<o.length;r++)if(this.compareTags(t[i],o[r])){s=r;break}s==null&&t[i].getAttribute("data-async-theme")===null&&!this.isMatchesTag(t[i],this.options.persistTags)&&n.push({tag:t[i]})}return n});g(this,"getTagsToAdd",(t,o,n)=>{let i=[];for(let s=0;s<o.length;s++){let r=null;for(let c=0;c<t.length;c++)if(this.compareTags(t[c],o[s])){r=c;break}r==null&&!this.isMatchesTag(o[s],this.options.specialTags)&&i.push({index:n?s+1:s,tag:o[s]})}return i});g(this,"isMatchesTag",(t,o=this.options.persistTags)=>typeof o=="function"?o(t):typeof o=="string"?t.matches(o):!!o);g(this,"updateHtmlLangAttribute",()=>{let t=document.documentElement,n=new DOMParser().parseFromString(this.swup.cache.getCurrentPage().originalContent,"text/html").documentElement.lang;t.lang!==n&&(this.swup.log(`Updated lang attribute: ${t.lang} > ${n}`),t.lang=n)});this.options={...this.defaultOptions,...t},this.options.persistAssets&&!this.options.persistTags&&(this.options.persistTags="link[rel=stylesheet], script[src], style")}mount(){this.swup.on("contentReplaced",this.getHeadAndReplace),this.swup.on("contentReplaced",this.updateHtmlLangAttribute)}unmount(){this.swup.off("contentReplaced",this.getHeadAndReplace),this.swup.off("contentReplaced",this.updateHtmlLangAttribute)}},L=S;var tt=e=>Array.prototype.slice.call(e),_=class{constructor(t={}){g(this,"name","ScriptPlugin");g(this,"isSwupPlugin",!0);g(this,"defaultOptions",{selectors:"script[data-swup-reload-script]"});g(this,"swup");g(this,"options");g(this,"getScriptAndInsert",()=>{let t=this.getNextScriptChildren();t.length&&(async n=>{let i=Array.from(document.scripts);for(let s=0;s<n.length;s++){let r=n[s];r.src?i.findIndex(c=>c.src===r.src&&!c.dataset.reset)<0&&await this.loadScript(r):a.runScriptBlock(r)}})(t)});this.options={...this.defaultOptions,...t}}mount(){this.swup.on("contentReplaced",this.getScriptAndInsert)}unmount(){this.swup.off("contentReplaced",this.getScriptAndInsert)}loadScript(t){return new Promise((o,n)=>{let i=document.createElement("script");for(let{name:s,value:r}of tt(t.attributes))i.setAttribute(s,r);i.textContent=t.textContent,i.setAttribute("async","false"),i.onload=()=>{o(),document.body.contains(i)&&document.body.removeChild(i)},i.onerror=n,document.body.appendChild(i)})}getNextScriptChildren(){let t=this.swup.cache.getCurrentPage().originalContent.replace("<body",'<div id="swupBody"').replace("</body>","</div>"),o=document.createElement("div");o.innerHTML=t;let n=o.querySelector("#swupBody").querySelectorAll(this.options.selectors);return o.innerHTML="",o=null,n}},H=_;async function et(){let e=["https://corsproxy.io/?https://api.juejin.cn/tag_api/v1/query_category_briefs","https://api.allorigins.win/raw?url=https://api.juejin.cn/tag_api/v1/query_category_briefs","https://cors-anywhere.herokuapp.com/https://api.juejin.cn/tag_api/v1/query_category_briefs","https://thingproxy.freeboard.io/fetch/https://api.juejin.cn/tag_api/v1/query_category_briefs","https://cors.eu.org/https://api.juejin.cn/tag_api/v1/query_category_briefs","https://proxy.cors.sh/https://api.juejin.cn/tag_api/v1/query_category_briefs"];for(let t=0;t<e.length;t++)try{console.log(`Trying Juejin Category API ${t+1}: ${e[t]}`);let o=new AbortController,n=setTimeout(()=>o.abort(),8e3),i=await fetch(e[t],{headers:{Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},signal:o.signal});if(clearTimeout(n),!i.ok){console.log(`Juejin Category API ${t+1} failed with status: ${i.status}`);continue}let s=await i.json();if(console.log(`Juejin Category API ${t+1} response:`,s),s&&s.err_no===0&&s.data&&Array.isArray(s.data)){let r=s.data.find(c=>c.category_name==="\u540E\u7AEF"||c.category_url==="backend");if(r)return console.log(`Found backend category: ${r.category_name} (ID: ${r.category_id})`),r.category_id}}catch(o){o.name==="AbortError"?console.log(`Juejin Category API ${t+1} timed out`):console.log(`Juejin Category API ${t+1} error:`,o);continue}return console.log("All Juejin Category APIs failed, using default backend category ID"),"6809637769959178254"}async function ot(){let e=[{url:"https://api.allorigins.win/raw?url=https://blog.csdn.net/phoenix/web/blog/hot-rank",headers:{}},{url:"https://cors-anywhere.herokuapp.com/https://blog.csdn.net/phoenix/web/blog/hot-rank",headers:{}},{url:"https://thingproxy.freeboard.io/fetch/https://blog.csdn.net/phoenix/web/blog/hot-rank",headers:{}},{url:"https://cors.eu.org/https://blog.csdn.net/phoenix/web/blog/hot-rank",headers:{}},{url:"https://proxy.cors.sh/https://blog.csdn.net/phoenix/web/blog/hot-rank",headers:{"x-cors-api-key":"temp_1234567890"}}];for(let t=0;t<e.length;t++)try{console.log(`Trying CSDN API ${t+1}: ${e[t].url}`);let o=new AbortController,n=setTimeout(()=>o.abort(),1e4),i=await fetch(e[t].url,{headers:{...e[t].headers,Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},signal:o.signal});if(clearTimeout(n),!i.ok){console.log(`CSDN API ${t+1} failed with status: ${i.status}`);continue}let s=await i.json();if(console.log(`CSDN API ${t+1} response:`,s),s&&s.code===200&&Array.isArray(s.data))return console.log(`CSDN API ${t+1} succeeded`),s.data.map(r=>({title:r.articleTitle,url:r.articleDetailUrl}));console.log(`CSDN API ${t+1} response format is not as expected.`);continue}catch(o){o.name==="AbortError"?console.log(`CSDN API ${t+1} timed out`):console.log(`CSDN API ${t+1} error:`,o);continue}return console.log("All CSDN APIs failed, using mock data"),[{title:"CSDN\u70ED\u95E8\u6587\u7AE01",url:"https://blog.csdn.net/article1"},{title:"CSDN\u70ED\u95E8\u6587\u7AE02",url:"https://blog.csdn.net/article2"},{title:"CSDN\u70ED\u95E8\u6587\u7AE03",url:"https://blog.csdn.net/article3"},{title:"CSDN\u70ED\u95E8\u6587\u7AE04",url:"https://blog.csdn.net/article4"},{title:"CSDN\u70ED\u95E8\u6587\u7AE05",url:"https://blog.csdn.net/article5"}]}async function nt(){let e=[{url:"https://api.allorigins.win/raw?url=https://api.bilibili.com/x/web-interface/popular",headers:{}},{url:"https://cors-anywhere.herokuapp.com/https://api.bilibili.com/x/web-interface/popular",headers:{}},{url:"https://thingproxy.freeboard.io/fetch/https://api.bilibili.com/x/web-interface/popular",headers:{}},{url:"https://cors.eu.org/https://api.bilibili.com/x/web-interface/popular",headers:{}},{url:"https://proxy.cors.sh/https://api.bilibili.com/x/web-interface/popular/series/one",headers:{"x-cors-api-key":"temp_1234567890"}}];for(let t=0;t<e.length;t++)try{console.log(`Trying Bilibili API ${t+1}: ${e[t].url}`);let o=new AbortController,n=setTimeout(()=>o.abort(),1e4),i=await fetch(e[t].url,{headers:{...e[t].headers,Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},signal:o.signal});if(clearTimeout(n),!i.ok){console.log(`Bilibili API ${t+1} failed with status: ${i.status}`);continue}let s=await i.json();if(s&&s.code===0&&s.data&&Array.isArray(s.data.list))return console.log(`Bilibili API ${t+1} succeeded`),s.data.list.map(r=>({title:r.title,url:`https://www.bilibili.com/video/${r.bvid}`}));console.log(`Bilibili API ${t+1} response format is not as expected.`);continue}catch(o){o.name==="AbortError"?console.log(`Bilibili API ${t+1} timed out`):console.log(`Bilibili API ${t+1} error:`,o);continue}return console.log("All Bilibili APIs failed, using mock data"),[{title:"B\u7AD9\u70ED\u95E8\u89C6\u98911",url:"https://www.bilibili.com/video/BV1xx411c7mu"},{title:"B\u7AD9\u70ED\u95E8\u89C6\u98912",url:"https://www.bilibili.com/video/BV1xx411c7mv"},{title:"B\u7AD9\u70ED\u95E8\u89C6\u98913",url:"https://www.bilibili.com/video/BV1xx411c7mw"},{title:"B\u7AD9\u70ED\u95E8\u89C6\u98914",url:"https://www.bilibili.com/video/BV1xx411c7mx"},{title:"B\u7AD9\u70ED\u95E8\u89C6\u98915",url:"https://www.bilibili.com/video/BV1xx411c7my"}]}async function it(){let e=await et();console.log(`Using Juejin category ID: ${e}`);let t=[{url:"https://corsproxy.io/?https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed",method:"POST",body:JSON.stringify({id_type:2,sort_type:3,cate_id:e,cursor:"0",limit:20})},{url:"https://api.allorigins.win/raw?url=https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed",method:"POST",body:JSON.stringify({id_type:2,sort_type:3,cate_id:e,cursor:"0",limit:20})},{url:"https://cors-anywhere.herokuapp.com/https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed",method:"POST",body:JSON.stringify({id_type:2,sort_type:3,cate_id:e,cursor:"0",limit:20})},{url:"https://thingproxy.freeboard.io/fetch/https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed",method:"POST",body:JSON.stringify({id_type:2,sort_type:3,cate_id:e,cursor:"0",limit:20})},{url:"https://cors.eu.org/https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed",method:"POST",body:JSON.stringify({id_type:2,sort_type:3,cate_id:e,cursor:"0",limit:20})},{url:"https://proxy.cors.sh/https://api.juejin.cn/recommend_api/v1/article/recommend_cate_feed",method:"POST",body:JSON.stringify({id_type:2,sort_type:3,cate_id:e,cursor:"0",limit:20}),headers:{"x-cors-api-key":"temp_1234567890"}}];for(let o=0;o<t.length;o++)try{console.log(`Trying Juejin API ${o+1}: ${t[o].url}`);let n=new AbortController,i=setTimeout(()=>n.abort(),1e4),s=await fetch(t[o].url,{method:t[o].method,headers:{"Content-Type":"application/json",Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",...t[o].headers},body:t[o].body,signal:n.signal});if(clearTimeout(i),!s.ok){console.log(`Juejin API ${o+1} failed with status: ${s.status}`);continue}let r=await s.json();if(console.log(`Juejin API ${o+1} response:`,r),r&&r.err_no===0&&r.data&&Array.isArray(r.data))return console.log(`Juejin API ${o+1} succeeded, found ${r.data.length} articles`),r.data.map(c=>{var m;let d=((m=c.article_info)==null?void 0:m.title)||"\u6398\u91D1\u70ED\u95E8\u6587\u7AE0",l=`https://juejin.cn/post/${c.article_id}`;return{title:d,url:l}});if(r&&!r.data){console.log(`Juejin API ${o+1} - No data field found`);continue}else{console.log(`Juejin API ${o+1} response format is not as expected.`);continue}}catch(n){n.name==="AbortError"?console.log(`Juejin API ${o+1} timed out`):console.log(`Juejin API ${o+1} error:`,n);continue}return console.log("All Juejin APIs failed, using mock data"),[{title:"\u6398\u91D1\u70ED\u95E8\u6587\u7AE01",url:"https://juejin.cn/post/123456"},{title:"\u6398\u91D1\u70ED\u95E8\u6587\u7AE02",url:"https://juejin.cn/post/123457"},{title:"\u6398\u91D1\u70ED\u95E8\u6587\u7AE03",url:"https://juejin.cn/post/123458"},{title:"\u6398\u91D1\u70ED\u95E8\u6587\u7AE04",url:"https://juejin.cn/post/123459"},{title:"\u6398\u91D1\u70ED\u95E8\u6587\u7AE05",url:"https://juejin.cn/post/123460"}]}async function st(){let e=[{url:"https://api.github.com/search/repositories?q=stars:>1000&sort=stars&order=desc&per_page=10",headers:{}},{url:"https://api.allorigins.win/raw?url=https://api.github.com/search/repositories?q=stars:>1000&sort=stars&order=desc&per_page=10",headers:{}},{url:"https://cors-anywhere.herokuapp.com/https://api.github.com/search/repositories?q=stars:>1000&sort=stars&order=desc&per_page=10",headers:{}},{url:"https://thingproxy.freeboard.io/fetch/https://api.github.com/search/repositories?q=stars:>1000&sort=stars&order=desc&per_page=10",headers:{}},{url:"https://proxy.cors.sh/https://api.github.com/search/repositories?q=stars:>1000&sort=stars&order=desc&per_page=10",headers:{"x-cors-api-key":"temp_1234567890"}},{url:"https://cors.eu.org/https://api.github.com/search/repositories?q=stars:>1000&sort=stars&order=desc&per_page=10",headers:{}}];for(let t=0;t<e.length;t++)try{console.log(`Trying GitHub API ${t+1}: ${e[t].url}`);let o=new AbortController,n=setTimeout(()=>o.abort(),1e4),i=await fetch(e[t].url,{headers:{...e[t].headers,Accept:"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},signal:o.signal});if(clearTimeout(n),!i.ok){console.log(`GitHub API ${t+1} failed with status: ${i.status}`);continue}let s=await i.json();if(s&&Array.isArray(s.items))return console.log(`GitHub API ${t+1} succeeded, found ${s.items.length} repositories`),s.items.map(r=>{var c;return{title:`${r.name} - ${((c=r.description)==null?void 0:c.substring(0,50))||""}`,url:r.html_url}});console.log(`GitHub API ${t+1} response format is not as expected.`);continue}catch(o){o.name==="AbortError"?console.log(`GitHub API ${t+1} timed out`):console.log(`GitHub API ${t+1} error:`,o);continue}return console.log("All GitHub APIs failed, using mock data"),[{title:"GitHub\u70ED\u95E8\u9879\u76EE1",url:"https://github.com/project1"},{title:"GitHub\u70ED\u95E8\u9879\u76EE2",url:"https://github.com/project2"},{title:"GitHub\u70ED\u95E8\u9879\u76EE3",url:"https://github.com/project3"},{title:"GitHub\u70ED\u95E8\u9879\u76EE4",url:"https://github.com/project4"},{title:"GitHub\u70ED\u95E8\u9879\u76EE5",url:"https://github.com/project5"}]}async function rt(){let e=[{url:"https://www.cnblogs.com/aggsite/headline",headers:{}},{url:"https://api.allorigins.win/raw?url=https://www.cnblogs.com/aggsite/headline",headers:{}},{url:"https://cors-anywhere.herokuapp.com/https://www.cnblogs.com/aggsite/headline",headers:{}},{url:"https://thingproxy.freeboard.io/fetch/https://www.cnblogs.com/aggsite/headline",headers:{}},{url:"https://proxy.cors.sh/https://www.cnblogs.com/aggsite/headline",headers:{"x-cors-api-key":"temp_1234567890"}},{url:"https://cors.eu.org/https://www.cnblogs.com/aggsite/headline",headers:{}},{url:"https://api.allorigins.win/get?url=https://www.cnblogs.com/cate/108703/",headers:{}}];for(let t=0;t<e.length;t++)try{console.log(`Trying CNBlogs API ${t+1}: ${e[t].url}`);let o=new AbortController,n=setTimeout(()=>o.abort(),1e4),i=await fetch(e[t].url,{headers:{...e[t].headers,Accept:"application/json,text/html","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},signal:o.signal});if(clearTimeout(n),!i.ok){console.log(`CNBlogs API ${t+1} failed with status: ${i.status}`);continue}let s=i.headers.get("content-type");if(s&&s.includes("application/json")){let r=await i.json();if(Array.isArray(r))return console.log(`CNBlogs API ${t+1} succeeded (JSON format)`),r.slice(0,10).map(c=>({title:c.Title||c.title,url:c.Url||c.url}));if(r&&r.contents){let c=r.contents;return P(c)}}else{let r=await i.text(),c=P(r);if(c.length>0)return console.log(`CNBlogs API ${t+1} succeeded (HTML format), found ${c.length} items`),c}console.log(`CNBlogs API ${t+1} response format is not as expected.`);continue}catch(o){o.name==="AbortError"?console.log(`CNBlogs API ${t+1} timed out`):console.log(`CNBlogs API ${t+1} error:`,o);continue}return console.log("All CNBlogs APIs failed, using mock data"),[{title:"\u535A\u5BA2\u56ED\u70ED\u95E8\u6587\u7AE01",url:"https://www.cnblogs.com/article1"},{title:"\u535A\u5BA2\u56ED\u70ED\u95E8\u6587\u7AE02",url:"https://www.cnblogs.com/article2"},{title:"\u535A\u5BA2\u56ED\u70ED\u95E8\u6587\u7AE03",url:"https://www.cnblogs.com/article3"},{title:"\u535A\u5BA2\u56ED\u70ED\u95E8\u6587\u7AE04",url:"https://www.cnblogs.com/article4"},{title:"\u535A\u5BA2\u56ED\u70ED\u95E8\u6587\u7AE05",url:"https://www.cnblogs.com/article5"}]}function P(e){let t=[],o=/<a[^>]+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,n,i=0;for(;(n=o.exec(e))!==null&&i<10;){let s=n[1],r=n[2].trim();if(s&&r&&r.length>10&&!s.includes("javascript:")&&!s.includes("#")&&(s.startsWith("https://www.cnblogs.com/")||s.startsWith("/p/"))){let c=s.startsWith("/")?`https://www.cnblogs.com${s}`:s;t.push({title:r,url:c}),i++}}return t}function T(e,t){let o=document.getElementById(e);if(o){let n=document.createElement("ul");n.className="trm-list",t.forEach((i,s)=>{let r=document.createElement("li"),c=document.createElement("a");c.href=i.url,c.target="_blank";let d=document.createElement("span");d.className="hot-rank",d.textContent=(s+1).toString();let l=document.createElement("span");l.className="hot-title",l.textContent=i.title,c.appendChild(d),c.appendChild(l),r.appendChild(c),n.appendChild(r)}),o.innerHTML="",o.appendChild(n)}}async function A(){let e=await ot();T("csdn-hot-search",e);let t=await nt();T("bilibili-hot-search",t);let o=await it();T("juejin-hot-search",o);let n=await st();T("github-hot-search",n);let i=await rt();T("cnblogs-hot-search",i)}document.addEventListener("DOMContentLoaded",A);document.addEventListener("swup:contentReplaced",A);function $(){window.Fancybox&&(window.Fancybox.bind("[data-fancybox]"),window.Fancybox.bind('[data-fancybox="light"],[data-fancybox="article"]',{groupAll:!0}),window.Fancybox.bind('[data-fancybox="dark"],[data-fancybox="article"]',{groupAll:!0}),window.Fancybox.defaults.Hash=!1)}function j(){window.Swiper&&new window.Swiper(".trm-slideshow",{slidesPerView:1,effect:"fade",parallax:!0,autoplay:!0,speed:1400})}function k(){window.Fancybox&&a.qa("#article-container img:not(.no-fancybox)").forEach(e=>{if(!e.parentNode.dataset.fancybox){let t="article";e.classList.contains("trm-light-icon")?t="light":e.classList.contains("trm-dark-icon")&&(t="dark"),a.wrap(e,"div",{"data-src":e.dataset.src||e.src,"data-fancybox":t})}})}function ct(){let e=[];e.push(new L({specialTags:"#trm-switch-style"})),e.push(new H);let t={containers:["#trm-dynamic-content"],animateHistoryBrowsing:!0,linkSelector:".trm-menu a:not([data-no-swup]), .trm-anima-link:not([data-no-swup])",animationSelector:'[class="trm-swup-animation"]',plugins:e};return new window.Swup(t)}function M(e=!1){let t=a.q("#trm-swich"),o=a.q(".trm-mode-swich-animation"),n=a.q(".trm-mode-swich-animation-frame");if(e){let i=(localStorage.getItem("theme-mode")||window.ASYNC_CONFIG.theme.default)=="style-dark",s=i?"add":"remove";o.classList[s]("trm-active"),n.classList.remove("trm-active"),x.setThemeColor(),t&&(t.checked=i)}t&&t.addEventListener("change",function(){x.switchThemeMode(this.checked?"style-dark":"style-light")})}function O(){let e=a.q(".trm-banner-cover"),t=a.q(".trm-sidebar"),o=a.q("#trm-back-top"),n=a.q("#scroll-triger"),i=a.q(".trm-fixed-container"),s=new IntersectionObserver(u=>{u.forEach(({isIntersecting:f,target:p})=>{f&&(p.classList.add("trm-active-el"),s.unobserve(p))})},{threshold:[0,1],rootMargin:"0px 0px -40px 0px"}),r=u=>window.scrollTo({top:0,behavior:u?"smooth":"auto"}),c=function(){let u=a.scrollTop(),{scrollHeight:f,clientHeight:p}=document.documentElement,y=u>500?"add":"remove";i==null||i.classList[y]("offset");let b=parseInt((u/(f-p)*100).toString());o&&(o.style.backgroundSize=`100% ${b}%`);let h=u>=70?"add":"remove";t&&(t.classList[h]("fixed"),d()),e&&(e.style.transform=`matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, ${Math.min(u/3,100)}, 0, 1)`),x.switchToc(!1)},d=function(){t&&(window.innerWidth>992&&t.classList.contains("fixed")?(t.style.left=t.parentElement.offsetLeft+20+"px",t.style.width=`${t.parentElement.clientWidth-40}px`):(t.style.left="unset",t.style.width="auto"))},l=function(){let u=a.q(".trm-banner");u&&window.scrollTo({top:u.clientHeight-20,behavior:"smooth"})},m=new MutationObserver(()=>d());(()=>{a.qa(".trm-scroll-animation").forEach(u=>u&&s.observe(u)),c(),d(),m.observe(document.body,{attributeFilter:["style","class"]})})(),o==null||o.addEventListener("click",r),n==null||n.addEventListener("click",l),window.addEventListener("scroll",c),window.addEventListener("resize",d),document.addEventListener("swup:contentReplaced",()=>{s.disconnect(),o==null||o.removeEventListener("click",r),n==null||n.removeEventListener("click",l),window.removeEventListener("scroll",c),window.removeEventListener("resize",d),r(),m.disconnect()})}function q(e=2e3){let t=(o,n,i,s)=>{i+=n,i>=s?o.innerText=s.toString():(o.innerText=parseInt(i.toString()).toString(),requestAnimationFrame(()=>t(o,n,i,s)))};a.qa(".trm-counter").forEach(o=>{let n=Number(o.innerText);if(!isNaN(n)){let i=n/(e/16);t(o,i,0,n)}})}function F(){let{i18n:e,toc:t,icons:o,icontype:n}=window.ASYNC_CONFIG,i=a.q("#post-toc"),s=a.q(".post-toc-btn");if(i){let r=i.querySelector("#post-toc-top"),c=i.querySelector(".trm-post-toc-header");r.addEventListener("click",function(){i.classList.contains("fixed")?(i.classList.remove("fixed","active"),r.innerHTML=e.sticky):(i.classList.add("fixed"),r.innerHTML=a.icons(o.close,n))}),i.addEventListener("click",function(l){l.preventDefault(),l.stopPropagation();let m=l.target,w=m.getAttribute("href");if(w?w=w.replace(/^#/,""):w=m.parentElement.getAttribute("href").replace(/^#/,""),!w)return;let u=document.querySelector(`[id="${w}"]`);if(!u)return;let f=u.getBoundingClientRect().top+a.scrollTop();return window.scrollTo({top:f-110,behavior:"smooth"}),!1}),c.addEventListener("mousedown",function(l){if(!i.classList.contains("fixed"))return;let m=c.getBoundingClientRect(),w=l.clientX,u=l.clientY,f=!0;document.onmousemove=function(p){if(f){let y=p.clientX,b=p.clientY;i.style.left=`${y-(w-m.x)}px`,i.style.top=`${b-(u-m.y)}px`,i.style.right="unset",i.style.bottom="unset",i.style.opacity=".6"}},document.onmouseup=function(){f=!1,document.onmousemove=null,document.onmouseup=null,i.style.removeProperty("opacity")}}),t.post_title&&i.querySelectorAll(".trm-toc-link").forEach(l=>{let m=l.getAttribute("href").replace(/^#/,""),w=a.q(`[id="${m}"]`);if(!w)return;let u=document.createElement("span");u.className="trm-toc-icon",u.innerHTML=a.icons(o.toc_tag,n),u.onclick=function(f){return x.switchToc(!0,f.clientX,f.clientY),f.preventDefault(),f.stopPropagation(),!1},w.appendChild(u)});let d=l=>{i.classList.contains("fixed")||(a.clickoutside(l.target,[i,s])?i.classList.remove("active"):x.switchToc())};window.addEventListener("click",d),document.addEventListener("swup:contentReplaced",()=>{window.removeEventListener("click",d)})}}function at(){if(window.ASYNC_CONFIG.creative_commons){let{author:e}=window.ASYNC_CONFIG,{i18n:t,creative_commons:o}=window.ASYNC_CONFIG,n=function(i){let s=i.clipboardData||window.clipboardData;if(!s)return;let r=window.getSelection().toString();if(r){i.preventDefault();let c=document.getElementById("post-author");c&&(e=c.innerText.replace(`
`,""));let d=location.href,l=document.getElementById("original-link");l&&(d=l.innerText.replace(`
`,""));let m=`

${t.author}${e}
${t.copyright_link}${d}
${t.copyright_license_title}${t.copyright_license_content.replace("undefined","CC"+o.license.toUpperCase()+" "+(o.license=="zero"?"1.0":"4.0"))}`;s.setData("text/plain",r+m)}};document.addEventListener("copy",n)}}function G(){let{i18n:e,highlight:t,icons:o,icontype:n}=window.ASYNC_CONFIG,i=t.copy,s=t.lang,r=t.height_limit,c=i||s,d=t.plugin==="prismjs",l=t.title==="mac",m=d?'pre[class*="language-"]':"figure.highlight",w=a.qa(m);if(!(c||r||w.length))return;let u=function(){try{let p=this.parentNode.parentNode,y=p.querySelector(".code");if(y||(y=p.querySelector("table")),y||(y=p.querySelector("code")),!y)return;navigator.clipboard.writeText(y.innerText),a.message(e.copy_success)}catch(p){a.message(e.copy_failure,"warning")}},f=function(){let p=this.classList.contains("expand-done"),y=a.scrollTop(),b=this.parentElement.clientHeight;this.classList.toggle("expand-done");let h=this.parentElement.clientHeight;if(p){let C=b-h;if(C<a.viewPortHeight())return;window.scrollTo({top:y-C})}};a.qa(m).forEach(p=>{let y=document.createDocumentFragment(),b=document.createElement("div");if(b.className=`code-tools ${c&&l?"mac-style":"default-style"}`,s){let h="";d?h=p.getAttribute("data-language")?p.getAttribute("data-language"):"Code":(h=p.getAttribute("class").split(" ")[1],(h==="plain"||h===void 0)&&(h="Code"));let C=document.createElement("span");C.className="code-lang",C.innerText=h,b.append(C)}if(i){let h=document.createElement("span");h.className="copy-button",h.innerHTML=a.icons(o.copy,n),h.addEventListener("click",u),b.append(h)}if(r&&p.offsetHeight>t.height_limit+50){let h=document.createElement("div");h.innerHTML=a.icons(o.double_arrows,n),h.className="code-expand-btn",h.addEventListener("click",f),y.append(h)}if(y.append(b),d){a.wrap(p,"figure",{class:"highlight"}),p.parentNode.insertBefore(y,p);let h=p.querySelector(".caption,caption");h&&p.parentNode.appendChild(h)}else p.insertBefore(y,p.querySelector("table"))})}function B(){a.qa(".trm-tabs .trm-tab > button").forEach(function(e){e.addEventListener("click",function(){let t=this.parentNode;if(!t.classList.contains("active")){let o=t.parentNode.nextElementSibling,n=a.siblings(t,".active")[0];n&&n.classList.remove("active"),t.classList.add("active");let i=this.getAttribute("data-href").replace("#","");[...o.children].forEach(r=>{r.id===i?r.classList.add("active"):r.classList.remove("active")})}})})}function D(){let e=a.qa(".fj-gallery");e.length&&(e.forEach(t=>{t.querySelectorAll("img").forEach(n=>{n.loading="eager",a.wrap(n,"div",{class:"fj-gallery-item","data-src":n.dataset.src||n.src,"data-fancybox":"gallery"})})}),a.loadScript(window.ASYNC_CONFIG.plugin.flickr_justified_gallery,window.fjGallery).then(()=>{e.forEach(t=>{window.fjGallery(t,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})})}))}function lt(){if(window.ASYNC_CONFIG&&window.ASYNC_CONFIG.favicon.visibilitychange){window.originTitle=document.title;let e,t=Array.from(a.qa('[rel="icon"]')),o=t.map(n=>n.href);document.addEventListener("visibilitychange",function(){document.hidden?(t.forEach(n=>{n.href=a.urlFor(window.ASYNC_CONFIG.favicon.hidden)}),document.title=window.ASYNC_CONFIG.favicon.hideText||window.ASYNC_CONFIG.favicon.hide_text,clearTimeout(e)):(t.forEach((n,i)=>{n.href=o[i]}),document.title=(window.ASYNC_CONFIG.favicon.showText||window.ASYNC_CONFIG.favicon.show_text)+window.originTitle,e=setTimeout(function(){document.title=window.originTitle},2e3))})}}function Y(){let{notice_outdate:e,i18n:t}=window.ASYNC_CONFIG;if(e){let o=a.diffDate(window.PAGE_CONFIG.postUpdate);if(o>=e.limit_day){let n=document.createElement("div");n.className=`post-outdate-notice ${e.position}`,n.textContent=t.notice_outdate_message.replace("undefined",o.toString());let i=document.getElementById("article-container");e.position==="top"?i.insertBefore(n,i.firstChild):i.appendChild(n)}}}function W(){if(window.ASYNC_CONFIG.covers&&window.PAGE_CONFIG.isHome){let e=window.ASYNC_CONFIG.covers;a.qa("div[data-random-img]").forEach(o=>{let n=a.getRandomItem(e);n+=n.includes("?")?`&v=${Math.random()}`:`?v=${Math.random()}`,n&&(o.style.backgroundImage=`url(${n})`)})}}function J(){a.q(".trm-menu-btn").addEventListener("click",function(){a.q(".trm-menu-btn,.trm-right-side").classList.toggle("trm-active")})}function dt(){let e=t=>console.log(t,"color: white; background: #0078E7; padding:5px 0;margin: 0 0 2px 0;border-radius: 4px 0 0 4px;","padding: 4px;border:1px solid #0078E7;border-radius: 0 4px 4px 0; background: linear-gradient(70deg, #e3f9eb, #d1dbff);");e(`%c \u{1F680} Hexo-Theme-Async ${window.ASYNC_CONFIG.theme_version=="0.0.0"?"Github":window.ASYNC_CONFIG.theme_version} %c https://github.com/MaLuns/hexo-theme-async `),e("%c \u{1F4D1} Hexo-Theme-Async Docs %c https://hexo-theme-async.imalun.com ")}function R(){var t;let e=window.ASYNC_CONFIG.live_time;if(e!=null&&e.start_time){let o=new Date(e.start_time),i=new Date().getTime()-o.getTime(),s=1440*60*1e3,r=Math.floor(i/s),c=document.querySelector(".blog-run-long");c&&(c.innerHTML=(t=e==null?void 0:e.prefix)==null?void 0:t.replace("undefined",`<span class="trm-accent-color"> ${r} </span>`))}}window.asyncFun=x;function I(){dt(),x.pageLoading(),lt(),window.PAGE_CONFIG.isPost&&Y(),D(),k(),G(),B(),window.ASYNC_CONFIG.swup&&ct(),J(),M(!0),q(),O(),j(),$(),F(),at(),W(),R(),A(),window.ASYNC_CONFIG.swup&&document.addEventListener("swup:contentReplaced",function(){let e=a.gId("async-page-config");e&&a.runScriptBlock(e),window.PAGE_CONFIG.isPost&&Y(),J(),document.body.classList.remove("trm-read-mode"),R(),D(),k(),G(),B(),a.q(".trm-scroll-container").style.opacity="1",M(!0),q(),O(),j(),$(),F(),W(),A()})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();})();
